"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LocalTaskManager = void 0;
const typedi_1 = __importDefault(require("typedi"));
const task_manager_1 = require("./task-manager");
const task_broker_service_1 = require("../task-broker.service");
class LocalTaskManager extends task_manager_1.TaskManager {
    constructor() {
        super();
        this.id = 'single-main';
        this.registerRequester();
    }
    registerRequester() {
        this.taskBroker = typedi_1.default.get(task_broker_service_1.TaskBroker);
        this.taskBroker.registerRequester(this.id, this.onMessage.bind(this));
    }
    sendMessage(message) {
        void this.taskBroker.onRequesterMessage(this.id, message);
    }
}
exports.LocalTaskManager = LocalTaskManager;
//# sourceMappingURL=local-task-manager.js.map